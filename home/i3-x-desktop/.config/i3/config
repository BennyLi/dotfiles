# i3 config file (v4)

#####  CONSTANTS  #####
set $mod Mod4
floating_modifier $mod

set $set_background feh --randomize --bg-fill ~/Pictures/Wallpaper/tech/*

# Monitors
set $internalmonitor  LVDS1
set $externalmonitor  HDMI1
set $externalmonitor2 VGA1

# Terminal
set $ws_terminal "1: "
# Browser
set $ws_browser "2: "
# Mail and Communication
set $ws_mail "3: "
# Development Database
set $ws_db "4: "
# Development IDE
set $ws_dev "5: "
# Frontend Development
set $ws_dev_front "6: "
# Business (iteratec)
set $ws_business "7: "
# Windows VM
set $ws_winvm "8: "
# Notes
set $ws_notes "9: "
# Keepass
set $ws_keepass "10: "


### LAYOUT
# Color Palette: http://paletton.com/#uid=63k0u0k18O17rzm4NFO2nx-35tf

# Icons: https://cdn.materialdesignicons.com/1.7.22/
font pango:Material Design Icons 10, DejaVu Sans Mono 8

### AVIATAR Color Scheme
set $background         2f343f
set $textcolor          EEEEEE
# Dark Grey
set $textcolor_unfo     B2BABD
# Signal Blue
set $border_focused     609ACF
# Signal Red
set $border_urgent      FF505A
# Orange
set $border_placeh      FFAB00
# Signal Blue
set $indicator          09ACF8
# Background Color
set $child_border       2f343f

#			            border              backgr.         text                indicator       child_border
client.focused		    #$border_focused    #$background    #$textcolor         #$indicator     #$child_border
client.focused_inactive #$background        #$background    #$textcolor_unfo    #$indicator     #$child_border
client.unfocused	    #$background        #$background    #$textcolor_unfo    #$indicator     #$child_border
client.urgent		    #$border_urgent     #$background    #$textcolor         #$indicator     #$child_border
client.placeholder	    #$border_placeh     #$background    #$textcolor         #$indicator     #$child_border



#####  Some default keybindings  #####

bindsym $mod+Return exec roxterm

# kill focused window
bindsym $mod+Shift+q kill

set $rofi_alpha         DD
set $rofi_alpha_alt     88
set $rofi_active_back   09ACF8
set $rofi_text_urgent   FF505A

bindsym $mod+d exec "rofi -show run -lines 9 -eh 2 -fullscreen -padding 390 -hide-scrollbar \
    -color-window \\"argb:$rofi_alpha$background\\" \
    -color-normal \\"argb:$rofi_alpha$background, argb:FF$textcolor_unfo, argb:$rofi_alpha_alt$background, argb:$rofi_alpha$indicator, argb:FF$textcolor\\" \
    -color-active \\"argb:$rofi_alpha$background, argb:FF$textcolor_unfo, argb:$rofi_alpha_alt$background, argb:$rofi_alpha$rofi_active_back, argb:FF$textcolor\\" \
    -color-urgent \\"argb:$rofi_alpha$background, argb:FF$rofi_text_urgent, argb:$rofi_alpha_alt$background, argb:$rofi_alpha$rofi_active_back, argb:FF$textcolor\\" \
"

# change focus
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+h focus left
#bindsym $mod+Left focus left
#bindsym $mod+Down focus down
#bindsym $mod+Up focus up
#bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+h move left
#bindsym $mod+Shift+Left move left
#bindsym $mod+Shift+Down move down
#bindsym $mod+Shift+Up move up
#bindsym $mod+Shift+Right move right

bindsym $mod+v split toggle

bindsym $mod+f fullscreen toggle

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

bindsym $mod+a focus parent
#bindsym $mod+d focus child

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"



#####  WORKSPACES  #####

# switch to workspace
bindsym $mod+1 workspace $ws_terminal
bindsym $mod+2 workspace $ws_browser
bindsym $mod+3 workspace $ws_mail
bindsym $mod+4 workspace $ws_db
bindsym $mod+5 workspace $ws_dev
bindsym $mod+6 workspace $ws_dev_front
bindsym $mod+7 workspace $ws_business
bindsym $mod+8 workspace $ws_winvm
bindsym $mod+9 workspace $ws_notes
bindsym $mod+0 workspace $ws_keepass

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws_terminal
bindsym $mod+Shift+2 move container to workspace $ws_browser
bindsym $mod+Shift+3 move container to workspace $ws_mail
bindsym $mod+Shift+4 move container to workspace $ws_db
bindsym $mod+Shift+5 move container to workspace $ws_dev
bindsym $mod+Shift+6 move container to workspace $ws_dev_front
bindsym $mod+Shift+7 move container to workspace $ws_business
bindsym $mod+Shift+8 move container to workspace $ws_winvm
bindsym $mod+Shift+9 move container to workspace $ws_notes
bindsym $mod+Shift+0 move container to workspace $ws_keepass

# move workspace to monitor
set $movetomonitormenu "Move workspace to [i]nternal, [h]dmi, [v]ga monitor"
mode $movetomonitormenu {
  bindsym i exec "i3-msg move workspace to output $internalmonitor", mode "default"
  bindsym h exec "i3-msg move workspace to output $externalmonitor", mode "default"
  bindsym v exec "i3-msg move workspace to output $externalmonitor2", mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+Shift+m mode $movetomonitormenu

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        #bindsym Left resize shrink width 10 px or 10 ppt
        #bindsym Down resize grow height 10 px or 10 ppt
        #bindsym Up resize shrink height 10 px or 10 ppt
        #bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"


#####  CUSTOM KEYBINDINGS  ######

# TODO Build shutdown / lockout / lock menu
set $shutdownmenu "[l]ock, [r]eboot, [h]ibernate, [s]hutdown"
mode $shutdownmenu {
  bindsym l exec i3lock-fancy -t "", mode "default"
  bindsym r exec "i3-nagbar -t warning -m 'Reboot?' -b 'Yes' 'reboot'", mode "default"
  bindsym s exec "i3-nagbar -t warning -m 'Shutdown?' -b 'Yes' 'reboot'", mode "default"
  bindsym h exec i3lock-fancy -t "" && systemctl hybrid-sleep, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+Shift+s mode $shutdownmenu

# choose external monitor
set $monitormenu "Choose Monitor Output: [i]nteral only, [h]dmi above internal, [v]ga above internal, [m]ulti external above internal, [b]ackground reset"
mode $monitormenu {
	bindsym h exec xrandr --output $internalmonitor --primary --auto --output $externalmonitor --above $internalmonitor --auto, exec $set_background, mode "default"
	bindsym v exec xrandr --output $internalmonitor --primary --auto --output $externalmonitor2 --above $internalmonitor --auto, exec $set_background, mode "default"
	bindsym m exec xrandr --output $internalmonitor --primary --auto --output $externalmonitor --above $internalmonitor --auto --output $externalmonitor2 --left-of $externalmonitor --auto, exec $set_background, mode "default"
	bindsym i exec xrandr --output $internalmonitor --auto --output $externalmonitor --off --output $externalmonitor2 --off, exec $set_background, mode "default"
  bindsym b exec $set_background, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+m mode $monitormenu

set $netprofilemenu "Choose connection profile: [L]HT up, [l]HT down"
mode $netprofilemenu {
    bindsym Shift+l /home/bln/Development/LHT-DigitalAircraft/dual-network/dual-network-setup lht up, mode "default"
    bindsym l /home/bln/Development/LHT-DigitalAircraft/dual-network/dual-network-setup lht down, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+n mode $netprofilemenu

###  MEDIA KEYS  ###

bindsym XF86MonBrightnessUp exec xbacklight -inc 20
bindsym XF86MonBrightnessDown exec xbacklight -dec 20

# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle


######  WINDOW AND WORKSPACE RULES  ######

# Terminal on the big screen
workspace $ws_terminal output $externalmonitor

# Mails and communication on the internal screen
workspace $ws_mail output $internalmonitor
assign [class="^Thunderbird"] $ws_mail
assign [class="^Evolution"] $ws_mail
assign [class="^Slack"] $ws_mail

# Development should happen on the big screen
workspace $ws_dev output $externalmonitor
assign [class="^Eclipse"] $ws_dev
assign [class="^jetbrains-idea-ce"] $ws_dev

# ... but SQL on the internal to see both
workspace $ws_db output $internalmonitor


assign [class="^Keepassx"] $ws_keepass


######  AUTOSTART  ######

bar {
  # http://kumarcode.com/Adding-Weather-and-Gmail-info-to-my-i3-Status/
  status_command i3blocks -c ~/.config/i3/i3blocks.conf
  tray_output $externalmonitor
  tray_output $externalmonitor2
  tray_output $internalmonitor
}


# Automatic detection of external monitors
exec monitor-conf.sh
exec sleep 1; $set_background

# Network Manager
exec nm-applet

# Cloud file synchronisation
exec synology-cloud-station-drive

exec keepassx2 -style=gtk

exec i3-msg 'workspace $ws_mail; layout tabbed'
exec i3-msg 'workspace $ws_browser; layout tabbed'
exec i3-msg 'workspace $ws_notes; exec synology-note-station'

# Desktop transistions and transparency
exec compton -f --fade-delta=10 --inactive-dim 0.2

# Desktop notifications
exec dunst
